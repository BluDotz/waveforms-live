<ion-content class="wifi-setup-container">

    <ion-slides #wifiSlider>
        <ion-slide class="slide-container">
            <div class="content-container wifi-content-container">
                <div class="slide-header">Networks</div>
                <ion-item class="configure-item">
                    <ion-label>NIC</ion-label>
                    <div item-right class="item-content-right dropdown-popover-item-right">
                        <dropdown-popover [dataArray]="availableNics" (onSelection)="nicSelection($event)"></dropdown-popover>
                    </div>
                </ion-item>
                <ion-item class="configure-item">
                    <ion-label>Storage Location</ion-label>
                    <div item-right class="item-content-right dropdown-popover-item-right">
                        <dropdown-popover [dataArray]="storageLocations" (onSelection)="storageSelection($event)"></dropdown-popover>
                    </div>
                </ion-item>
                <ion-item class="configure-item" *ngIf="currentNicStatus.status === 'connected'">
                    <button ion-button class="text-button-side item-button disable-hover" (click)="manualDisconnect()">
                        Disconnect From Network
                    </button>
                </ion-item>
                <ion-row class="network-container" wrap>
                    <ion-col class="network-container-column" text-center>
                        <div class="network-header">
                            Available Networks
                        </div>
                        <div text-center *ngIf="!scanningForNetworks" class="available-button-container">
                            <button ion-button class="icon-only-button-side available-network-button disable-hover" (click)="refreshAvailableNetworks()">
                                <ion-icon name="refresh"></ion-icon>
                            </button>
                            <button ion-button class="icon-only-button-side available-network-button disable-hover" (click)="addCustomNetwork()">
                                <ion-icon name="add"></ion-icon>
                            </button>
                        </div>
                        <div text-center *ngIf="scanningForNetworks" class="spinner-container">
                            <ion-spinner name="crescent"></ion-spinner>
                        </div>
                        <div *ngFor="let availableNetwork of availableNetworks">
                            <ion-card class="network-card" (click)="routeToConfigSlide(availableNetwork)">
                                <ion-item class="card-info">
                                    {{availableNetwork.ssid}}
                                </ion-item>
                            </ion-card>
                        </div>
                    </ion-col>
                    <ion-col class="network-container-column" text-center>
                        <div class="network-header">
                            Saved Networks
                        </div>
                        <div text-center *ngIf="!scanningForNetworks" class="available-button-container">
                            <button ion-button class="icon-only-button-side available-network-button disable-hover" (click)="refreshSavedNetworks()">
                                <ion-icon name="refresh"></ion-icon>
                            </button>
                        </div>
                        <div *ngFor="let savedNetwork of savedNetworks, let i = index;">
                            <ion-card class="network-card" (click)="loadAndConnect(i)">
                                <ion-item class="card-info">
                                    {{savedNetwork.ssid}}
                                    <button item-right ion-button clear class="network-button" (click)="showPopover($event, i)">
                                        <ion-icon name="more"></ion-icon>
                                    </button>
                                </ion-item>
                            </ion-card>
                        </div>
                    </ion-col>
                </ion-row>
            </div>
            <ion-row>
                <ion-col text-left>
                    <button ion-button icon-left class="text-button-side disable-hover" (click)="closeModal()">
                        <ion-icon name="close"></ion-icon>
                        Close
                    </button>
                </ion-col>
            </ion-row>
        </ion-slide>

        <ion-slide class="slide-container">
            <div class="content-container wifi-content-container">
                <div class="slide-header">Setup Wifi</div>
                <ion-list class="wifi-list">

                    <ion-item class="card-info">
                        <ion-label>SSID</ion-label>
                        <div item-right class="item-content-right">{{selectedNetwork.ssid}}</div>
                    </ion-item>

                    <ion-item class="card-info">
                        <ion-label>Security Type</ion-label>
                        <div item-right class="item-content-right">{{selectedNetwork.securityType}}</div>
                    </ion-item>

                    <ion-item class="card-info" *ngIf="selectedNetwork.securityType === 'wpa' || selectedNetwork.securityType === 'wpa2'">
                        <ion-label>Password</ion-label>
                        <div item-right class="item-content-right hostname-input-wrapper">
                            <input type="password" class="custom-input" [(ngModel)]="password" />
                        </div>
                    </ion-item>
                    <div *ngIf="selectedNetwork.securityType === 'wep40' || selectedNetwork.securityType === 'wep104'">
                        <ion-item class="card-info">
                            <ion-label>Wep Key Index</ion-label>
                            <div item-right class="item-content-right hostname-input-wrapper">
                                <input class="custom-input" [(ngModel)]="wepKeyIndex" />
                            </div>
                        </ion-item>
                        <ion-item class="card-info" *ngFor="let key of wepKeyEntryArray, let i = index;">
                            <ion-label>Wep Key {{i + 1}}</ion-label>
                            <div item-right class="item-content-right hostname-input-wrapper">
                                <input placeholder="AA:34:CC:78:12" class="custom-input" [(ngModel)]="wepKeyArray[i]" />
                            </div>
                        </ion-item>
                    </div>
                        
                    <ion-item class="card-info">
                        <ion-label>Status</ion-label>
                        <div item-right class="item-content-right">{{wifiStatus}}</div>
                    </ion-item>

                    <button ion-button icon-right clear class="advanced-button" (tap)="toggleAdvancedSettings()">
                        Advanced
                        <ion-icon *ngIf="!showAdvancedSettings" name="arrow-dropdown"></ion-icon>
                        <ion-icon *ngIf="showAdvancedSettings" name="arrow-dropup"></ion-icon>
                    </button> 

                    <div>
                        <ion-item class="card-info collapse-card" [@expand]="showAdvancedSettings">
                            <ion-label>NIC</ion-label>
                            <div item-right class="item-content-right">{{selectedNic}}</div>
                        </ion-item>

                        <ion-item class="card-info collapse-card" [@expand]="showAdvancedSettings">
                            <ion-label>Storage Location</ion-label>
                            <div item-right class="item-content-right">{{selectedStorageLocation}}</div>
                        </ion-item>

                        <ion-item class="card-info collapse-card" [@expand]="showAdvancedSettings">
                            <ion-label>Save</ion-label>
                            <ion-checkbox item-right [(ngModel)]="save" (ngModelChange)="checkboxChanged('save')"></ion-checkbox>
                        </ion-item>
                        
                        <ion-item class="card-info collapse-card" [@expand]="showAdvancedSettings">
                            <ion-label>Auto-Connect</ion-label>
                            <ion-checkbox item-right [(ngModel)]="autoConnect" (ngModelChange)="checkboxChanged('autoConnect')" [disabled]="disableAutoConnect"></ion-checkbox>
                        </ion-item>
                        
                        <ion-item class="card-info collapse-card" [@expand]="showAdvancedSettings">
                            <ion-label>Connect Now</ion-label>
                            <ion-checkbox item-right [(ngModel)]="connectNow" (ngModelChange)="checkboxChanged('connectNow')"></ion-checkbox>
                        </ion-item>
                    </div>

                </ion-list>
            </div>
            <div>
                <ion-row>
                    <ion-col text-left>
                        <button ion-button icon-left class="text-button-side disable-hover" (click)="backToNetworks()">
                            <ion-icon name="close"></ion-icon>
                            Close
                        </button>
                    </ion-col>
                    <ion-col text-right>
                        <button ion-button icon-right class="text-button-side disable-hover" (click)="addNetwork()">
                            Add
                            <ion-icon name="add"></ion-icon>
                        </button>
                    </ion-col>
                </ion-row>
            </div>
        </ion-slide>
    </ion-slides>

</ion-content>