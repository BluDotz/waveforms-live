<ion-header>
    <ion-navbar>
        <button menuToggle>
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>DC Supply Test Page</ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding>

    <ion-grid>
        <ion-row>
            <ion-col width-25>
                <h1> Bulk Read </h1>
                <div *ngFor="let chan of activeDevice.instruments.dc.chans; let i = index">
                    <ion-item>
                        <ion-label>{{chan.name}}</ion-label>
                        <ion-checkbox dark checked="true" [(ngModel)]="bulkReadChannelsEnabled[i]"></ion-checkbox>
                    </ion-item>
                </div>
                <button (click)="bulkRead()">Bulk Read</button>
                <button (click)="bulkStream()">Bulk Stream</button>
                <button (click)="stopStream()">Stop Stream</button>
            </ion-col>
        </ion-row>
    </ion-grid>

    <div *ngFor="let chan of activeDevice.instruments.dc.chans; let i = index">
        <ion-grid>
            <ion-row>
                <ion-col>
                    <h1> {{chan.name}} </h1>
                </ion-col>
            </ion-row>

            <ion-row>
                <ion-col>
                    <h4>{{readVoltages[i]}} V </h4>
                </ion-col>
            </ion-row>

            <ion-row>
                <ion-col width-10>
                    <ion-input type="text" [(ngModel)]="targetVoltage[i]"></ion-input>
                </ion-col>
                <ion-col width-10>
                    <button (click)="setVoltages([i], [targetVoltage[i]])">Set</button>
                    <button (click)="getVoltages([i])">Get</button>
                    <ion-item>
                        <ion-label fixed>Stream Delay:</ion-label>
                        <ion-input type="text" [(ngModel)]="streamDelay[i]"></ion-input>
                    </ion-item>
                    <br /> Stream Delay:
                    <button (click)="streamVoltages([i])">Stream Read</button>
                    <br /> Data Frame: {{dataFrame[i]}}
                    <button (click)="stopStream()">Stop Stream</button>
                </ion-col>

            </ion-row>
        </ion-grid>
        <br />
        <br />
    </div>


</ion-content>